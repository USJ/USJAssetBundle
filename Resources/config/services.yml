services:
    mdb_asset.manager.asset:
        class: MDB\AssetBundle\Document\AssetManager
        arguments: ["@event_dispatcher","@doctrine.odm.mongodb.document_manager", "MDB\AssetBundle\Document\Asset" ]

    mdb_asset.manager.status:
        class: MDB\AssetBundle\Document\StatusManager
        arguments: ["@doctrine.odm.mongodb.document_manager",  "MDB\AssetBundle\Document\Status"]

    mdb_asset.event_listener.parent_change:
        class: MDB\AssetBundle\EventListener\ParentChangeListener
        tags:
            - { name: doctrine_mongodb.odm.event_listener, event: preUpdate }

    mdb_asset.event_listener.running_time:
        class: MDB\AssetBundle\EventListener\RunningTimeSubscriber
        arguments: ["@doctrine.odm.mongodb.document_manager","@mdb_asset.manager.status" ]
        tags:
            - { name: doctrine.odm.mongodb.event_subscriber, connection: default }

    mdb_asset.form_type.asset:
        class: MDB\AssetBundle\Form\Type\AssetType
        arguments: ["MDB\AssetBundle\Document\Asset"]
        tags:
            - { name: form.type, alias: mdb_asset_asset }

    mdb_asset.form_type.status:
        class: MDB\AssetBundle\Form\Type\StatusType
        arguments: ["MDB\AssetBundle\Document\Status"]
        tags:
            - { name: form.type, alias: mdb_asset_status }

    mdb_asset.form_factory.asset:
        class: MDB\AssetBundle\Form\Factory\FormFactory
        arguments: [@form.factory, %mdb_asset.form.asset.name%, %mdb_asset.form.asset.type%]

    mdb_asset.form_factory.status:
        class: MDB\AssetBundle\Form\Factory\FormFactory
        arguments: [@form.factory, %mdb_asset.form.status.name%, %mdb_asset.form.status.type%]

